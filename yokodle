<!DOCTYPE html>
<html>
<head>
    <title>YOKODLEï¼ˆãƒ¨ã‚³ãƒ‰ãƒ«ï¼‰</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        
        h1 {
            color: #FF0000;
        }
        
        .pokedle-container {
            width: 300px;
            margin: 0 auto;
        }
        
        .pokedle-input {
            margin: 10px;
            padding: 5px;
            width: 100%;
            font-size: 16px;
            text-align: center;
        }
        
        .pokedle-button {
            padding: 10px 20px;
            background-color: #FF0000;
            color: #FFFFFF;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
        }
        
        .pokedle-result {
            margin: 20px 0;
            font-size: 18px;
            font-weight: bold;
        }
        
        .pokedle-grid {
            margin-top: 20px;
            display: grid;
            grid-template-rows: repeat(9, 1fr);
            gap: 5px;
        }
        
        .pokedle-row {
            display: flex;
            justify-content: center;
        }
        
        .pokedle-cell {
            width: 40px;
            height: 40px;
            background-color: #FFFFFF;
            border: 1px solid #000000;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .pokedle-correct {
            background-color: #00FF00;
        }
        
        .pokedle-match {
            background-color: #FFFF00;
        }
        
        .pokedle-hidden {
            display: none;
        }
    </style>
    <script>
        // ãƒã‚±ãƒ¢ãƒ³ã®åå‰ãƒªã‚¹ãƒˆ
        let pokemonNames = [
            "ãƒªã‚¶ãƒ¼ãƒ‰ãƒ³",
            "ã‚¤ã‚·ãƒ„ãƒ–ãƒ†",
            "ãƒ«ã‚¬ãƒ«ã‚¬ãƒ³",
            "ãƒ«ãƒ³ãƒ‘ãƒƒãƒ‘",
            "ãƒ€ãƒ¼ã‚¯ãƒ©ã‚¤"
            // ä»–ã®ãƒã‚±ãƒ¢ãƒ³åã‚‚è¿½åŠ 
        ];
        
        // ãƒã‚±ãƒ‰ãƒ«ã®ç­”ãˆã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«é¸æŠ
        let answer = pokemonNames[Math.floor(Math.random() * pokemonNames.length)];
        
        // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®å›ç­”å›æ•°
        let remainingAttempts = 9;
        
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å›ç­”ã‚’ä¿æŒã™ã‚‹é…åˆ—
        let userGuesses = [];
        
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…¥åŠ›ã—ãŸå›ç­”ã®ãƒã‚§ãƒƒã‚¯
        function checkAnswer() {
            let userInput = document.getElementById("pokedle-input").value.toUpperCase();
            
            if (userInput.length !== answer.length) {
                document.getElementById("pokedle-result").innerText = "å…¥åŠ›ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚";
                return;
            }
            
            
            let masuStatus = "";
            
            
            remainingAttempts--;
            document.getElementById("pokedle-attempts").innerText = remainingAttempts.toString();
            
            let result = "";

            

            let correctIndexes = [];
            let matchIndexes = [];
            
            for (let i = 0; i < answer.length; i++) {
                if (userInput[i] === answer[i]) {
                    result += "O";
                    correctIndexes.push(i);
                } else if (answer.indexOf(userInput[i]) !== -1) {
                    result += "X";
                    matchIndexes.push(i);
                } else {
                    result += "-";
                }
            }

            for (let i = 0; i < answer.length; i++) {
                if (userInput[i] === answer[i]) {
                    masuStatus += "ğŸŸ©";
                    correctIndexes.push(i);
                } else if (answer.indexOf(userInput[i]) !== -1) {
                    masuStatus += "ğŸŸ¨";
                    matchIndexes.push(i);
                } else {
                    masuStatus += "â¬›";
                }
            }
            
            document.getElementById("pokedle-result").innerText = result;
            
            // å›ç­”ã‚’ãƒã‚¹ã«å…¥ã‚Œã¦è¡¨ç¤ºã—ã€æ­£è§£ã«å«ã¾ã‚Œã‚‹æ–‡å­—ã®ãƒã‚¹ã‚’é»„è‰²ã€æ­£è§£ã¨ä¸€è‡´ã™ã‚‹æ–‡å­—ã®ãƒã‚¹ã‚’ç·‘ã«ã™ã‚‹
            for (let j = 0; j < answer.length; j++) {
                let cell = document.getElementById("pokedle-cell-" + userGuesses.length + "-" + j);
                cell.innerText = userInput[j];
                cell.classList.remove("pokedle-correct", "pokedle-match");
                
                if (correctIndexes.indexOf(j) !== -1) {
                    cell.classList.add("pokedle-correct");
                } else if (matchIndexes.indexOf(j) !== -1) {
                    cell.classList.add("pokedle-match");
                }
            }
            
            // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å›ç­”ã‚’ä¿æŒ
            userGuesses.push(masuStatus);
            
            // ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ãƒã‚§ãƒƒã‚¯
            if (remainingAttempts === 0 || userInput === answer) {
                document.getElementById("pokedle-input").disabled = true;
                document.getElementById("pokedle-button").classList.add("pokedle-hidden");
                document.getElementById("pokedle-twitter").classList.remove("pokedle-hidden");
            }
        }
        
        // ãƒ„ã‚¤ãƒƒã‚¿ãƒ¼ã§å…±æœ‰
        function shareOnTwitter() {
            let masuStatus = "";
            for (let i = 0; i < userGuesses.length; i++) {
                masuStatus += userGuesses[i].replaceAll("-", "â¬›").replaceAll("O", "ğŸŸ©").replaceAll("X", "ğŸŸ¨");
                if (i !== userGuesses.length - 1) {
                    masuStatus += "\n";
                }
            }
            
            let tweetText = encodeURIComponent("Yokodle " + (9 - remainingAttempts) + "/9\n\n" + masuStatus + "\n\n#Yokodle");
            let tweetURL = "https://twitter.com/intent/tweet?text=" + tweetText;
            window.open(tweetURL);
        }

        // ãƒšãƒ¼ã‚¸ã®èª­ã¿è¾¼ã¿æ™‚ã«åˆæœŸåŒ–å‡¦ç†ã‚’å®Ÿè¡Œ
        window.onload = function() {
            // å›ç­”ãƒã‚¹ã®åˆæœŸåŒ–
            let grid = document.getElementById("pokedle-grid");
            for (let i = 0; i < 9; i++) {
                let row = document.createElement("div");
                row.classList.add("pokedle-row");
                
                for (let j = 0; j < 5; j++) {
                    let cell = document.createElement("div");
                    cell.id = "pokedle-cell-" + i + "-" + j;
                    cell.classList.add("pokedle-cell");
                    row.appendChild(cell);
                }
                
                grid.appendChild(row);
            }
            
            // å›ç­”å›æ•°ã®è¡¨ç¤º
            document.getElementById("pokedle-attempts").innerText = remainingAttempts.toString();
        };
    </script>
</head>
<body>
    <h1>YOKODLEï¼ˆãƒ¨ã‚³ãƒ‰ãƒ«ï¼‰</h1>
    <div class="pokedle-container">
        <input type="text" id="pokedle-input" class="pokedle-input" maxlength="5" placeholder="ãƒã‚±ãƒ¢ãƒ³åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„">
        <button onclick="checkAnswer()" class="pokedle-button" id="pokedle-button">ãƒã‚§ãƒƒã‚¯</button>
        <button onclick="shareOnTwitter()" class="pokedle-button pokedle-hidden" id="pokedle-twitter">ãƒ„ã‚¤ãƒƒã‚¿ãƒ¼ã§å…±æœ‰</button>
        <p id="pokedle-result"></p>
        <p>æ®‹ã‚Šã®å›ç­”å›æ•°: <span id="pokedle-attempts"></span></p>
        <div id="pokedle-grid" class="pokedle-grid"></div>
    </div>
    <script>
        // æ­£è§£ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
        function showSuccessMessage() {
            let successMessage = document.createElement("p");
            successMessage.innerText = "ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼æ­£è§£ã§ã™ï¼";
            document.querySelector(".pokedle-container").appendChild(successMessage);
        }

        // ãƒã‚§ãƒƒã‚¯ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’å‰Šé™¤
        document.getElementById("pokedle-button").removeEventListener("click", checkAnswer);

        // æ­£è§£æ™‚ã«ãƒ„ã‚¤ãƒƒã‚¿ãƒ¼ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
        if (remainingAttempts === 0 || userInput === answer) {
            document.getElementById("pokedle-button").classList.add("pokedle-hidden");
            document.getElementById("pokedle-twitter").classList.remove("pokedle-hidden");

            // æ­£è§£ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
            showSuccessMessage();
        }
    </script>
</body>
</html>
